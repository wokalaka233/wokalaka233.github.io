<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="user-scalable=no">
    <title>wpfçš„Toolbox</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, sans-serif;
        }
        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            overflow-x: hidden;
            padding-left: 240px;
            transition: padding-left 0.3s ease;
            position: relative;
        }
        .nav-toggle {
            position: fixed;
            left: 20px;
            top: 20px;
            width: 40px;
            height: 40px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            z-index: 101;
            transition: all 0.3s ease;
        }
        .nav-toggle:hover {
            transform: scale(1.1);
        }
        body.nav-collapsed {
            padding-left: 0;
        }
        body.nav-collapsed .navbar {
            transform: translateX(-100%);
        }
        .navbar {
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            width: 240px;
            background: rgba(255, 255, 255, 0.98);
            box-shadow: 2px 0 15px rgba(0, 0, 0, 0.15);
            padding: 30px 0;
            display: flex;
            flex-direction: column;
            z-index: 100;
            transition: transform 0.3s ease;
            overflow: hidden;
        }
        @media (max-width: 768px) {
            .navbar {
                width: 200px;
                transform: translateX(-100%);
            }
            body {
                padding-left: 0;
            }
        }
        .navbar-logo {
            text-align: center;
            margin-bottom: 50px;
            padding: 0 20px;
        }
        .navbar-logo h2 {
            font-size: 24px;
            color: #667eea;
            margin-bottom: 8px;
        }
        .navbar-logo p {
            color: #777;
            font-size: 14px;
        }
        .nav-list {
            list-style: none;
            flex: 1;
        }
        .nav-item {
            margin: 15px 0;
        }
        .nav-link {
            display: block;
            padding: 12px 30px;
            color: #555;
            text-decoration: none;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }
        .nav-link:hover, .nav-link.active {
            color: #667eea;
            background: rgba(102, 126, 234, 0.1);
            border-left: 3px solid #667eea;
            padding-left: 35px;
        }
        .main-content {
            padding: 50px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
        }
        .section {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            width: 100%;
            max-width: 800px;
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
            position: relative;
            z-index: 2;
        }
        .section.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        .intro-header {
            text-align: center;
            margin-bottom: 30px;
        }
        .intro-header h2 {
            font-size: 32px;
            color: #333;
            margin-bottom: 10px;
            position: relative;
            display: inline-block;
        }
        .intro-header h2::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 2px;
            margin: 10px auto 0;
        }
        .intro-content {
            line-height: 1.8;
            font-size: 16px;
            color: #555;
        }
        .intro-content p {
            margin-bottom: 20px;
        }
        .intro-highlights {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 30px;
        }
        .highlight-card {
            flex: 1;
            min-width: 200px;
            padding: 20px;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 12px;
            border: 1px solid #eee;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .highlight-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.15);
        }
        .highlight-card h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 18px;
        }
        .highlight-card p {
            font-size: 14px;
            color: #666;
            margin-bottom: 0;
        }
        .bmi-header {
            text-align: center;
            margin-bottom: 30px;
        }
        .bmi-header h2 {
            font-size: 28px;
            color: #333;
        }
        .bmi-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        .input-box {
            margin: 15px 0;
        }
        .input-box label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }
        .bmi-container input {
            padding: 8px;
            width: 200px;
            font-size: 16px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            outline: none;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .bmi-container input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }
        .bmi-container button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .bmi-container button:hover {
            background-color: #45a049;
            transform: scale(1.05);
        }
        #bmi-result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            font-size: 18px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        #bmi-result.show {
            opacity: 1;
        }
        .bmi-history {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        .bmi-history h3 {
            font-size: 18px;
            color: #667eea;
            margin-bottom: 15px;
        }
        .history-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 10px;
        }
        .history-item {
            padding: 8px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
        }
        .history-item:last-child {
            border-bottom: none;
        }
        .tetris-header {
            text-align: center;
            margin-bottom: 20px;
        }
        .tetris-header h2 {
            font-size: 28px;
            color: #333;
        }
        .tetris-container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 30px;
            flex-wrap: wrap;
            width: 100%;
            margin-bottom: 20px;
        }
        .tetris-main {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .tetris-board {
            border: 3px solid #667eea;
            border-radius: 8px;
            background: #f8f9fa;
            max-width: 90vw;
            height: auto;
            background-image: 
                linear-gradient(to right, #e0e0e0 1px, transparent 1px),
                linear-gradient(to bottom, #e0e0e0 1px, transparent 1px);
            background-size: 30px 30px;
        }
        .tetris-sidebar-pc {
            display: flex;
            flex-direction: column;
            gap: 20px;
            min-width: 180px;
        }
        .tetris-info {
            padding: 15px;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 8px;
            text-align: center;
            transition: box-shadow 0.3s ease;
        }
        .tetris-info:hover {
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
        }
        .tetris-info h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 16px;
        }
        .tetris-info p {
            font-size: 24px;
            font-weight: 600;
            color: #333;
        }
        .tetris-controls-pc {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .tetris-btn-pc {
            padding: 10px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: opacity 0.3s ease, transform 0.2s ease;
        }
        .tetris-btn-pc:hover {
            opacity: 0.9;
            transform: scale(1.03);
        }
        .tetris-btn-pc.special {
            background: linear-gradient(90deg, #f0a000, #f00000);
        }
        .controls-tip {
            margin-top: 10px;
            font-size: 13px;
            color: #666;
            text-align: center;
        }
        .tetris-info-mobile {
            display: none;
            flex-direction: row;
            gap: 20px;
            margin-top: 15px;
            width: 100%;
            justify-content: center;
        }
        .tetris-controls-mobile {
            display: none;
            margin-top: 20px;
            width: 100%;
        }
        .control-row {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        .tetris-btn-mobile {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            color: white;
            border: none;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.3s ease, transform 0.2s ease;
        }
        .tetris-btn-mobile:hover {
            opacity: 0.9;
            transform: scale(1.05);
        }
        .tetris-btn-mobile.special {
            background: linear-gradient(90deg, #f0a000, #f00000);
        }
        @media (max-width: 768px) {
            .tetris-container {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            .tetris-sidebar-pc {
                display: none;
            }
            .tetris-info-mobile {
                display: flex;
            }
            .tetris-controls-mobile {
                display: block;
            }
            #tetris-board, #tetris-board-fun {
                width: 240px !important;
                height: 480px !important;
                background-size: 24px 24px;
            }
        }
        @media (min-width: 769px) {
            .tetris-info-mobile,
            .tetris-controls-mobile {
                display: none;
            }
        }
        .calc-header {
            text-align: center;
            margin-bottom: 30px;
        }
        .calc-header h2 {
            font-size: 28px;
            color: #333;
        }
        .calc-container {
            max-width: 500px;
            margin: 0 auto;
            padding: 25px;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 12px;
            position: relative;
            z-index: 3;
        }
        .calc-display {
            width: 100%;
            height: 80px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 28px;
            text-align: right;
            overflow-x: auto;
            outline: none;
            pointer-events: auto;
            cursor: text;
            position: relative;
            z-index: 4;
        }
        .calc-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            position: relative;
            z-index: 4;
        }
        .calc-btn {
            padding: 18px;
            font-size: 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: #f1f3f5;
            color: #333;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            position: relative;
            z-index: 4;
        }
        .calc-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .calc-btn.operator {
            background: linear-gradient(90deg, #667eea, #764ba2);
            color: white;
        }
        .calc-btn.function {
            background: linear-gradient(90deg, #f0a000, #f08000);
            color: white;
        }
        .calc-btn.equal {
            background: #4CAF50;
            color: white;
            grid-column: span 2;
        }
        .calc-tip {
            margin-top: 20px;
            font-size: 13px;
            color: #666;
            text-align: center;
            position: relative;
            z-index: 4;
        }
        .heart {
            position: fixed;
            font-size: 24px;
            animation: floatOut 4s ease-in-out forwards;
            pointer-events: none;
            z-index: 9999 !important;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
            will-change: transform, opacity;
        }
        @keyframes floatOut {
            0% {
                transform: translate(0, 0) scale(0.5);
                opacity: 0;
            }
            20% {
                opacity: 1;
            }
            100% {
                transform: translate(calc(var(--x) * 1px), calc(var(--y) * 1px)) scale(2);
                opacity: 0;
            }
        }
        .hearts-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 9998;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div class="hearts-container"></div>
    
    <button class="nav-toggle" onclick="toggleNavbar()">èœå•</button>
    <nav class="navbar">
        <div class="navbar-logo">
            <h2>wpfçš„å·¥å…·ç®±</h2>
            <p>å°å°å·¥å…·</p>
        </div>
        <ul class="nav-list">
            <li class="nav-item">
                <a href="#intro" class="nav-link active" onclick="switchSection('intro')">å…³äºwebsite</a>
            </li>
            <li class="nav-item">
                <a href="#bmi" class="nav-link" onclick="switchSection('bmi')">BMIè®¡ç®—å™¨</a>
            </li>
            <li class="nav-item">
                <a href="#tetris" class="nav-link" onclick="switchSection('tetris')">ä¿„ç½—æ–¯æ–¹å—</a>
            </li>
            <li class="nav-item">
                <a href="#tetris-fun" class="nav-link" onclick="switchSection('tetris-fun')">çˆ½ç‰ˆä¿„ç½—æ–¯æ–¹å—</a>
            </li>
            <li class="nav-item">
                <a href="#calculator" class="nav-link" onclick="switchSection('calculator')">åŸºç¡€è®¡ç®—å™¨</a>
            </li>
        </ul>
    </nav>
    <div class="main-content">
        <section id="intro" class="section active animate__animated animate__fadeIn">
            <div class="intro-header">
                <h2>å…³äºè¿™ä¸ªç½‘ç«™</h2>
            </div>
            <div class="intro-content">
                <p>å¤§å®¶å¥½æˆ‘æ˜¯wpfï¼è¿™æ˜¯ä¸€ä¸ªæœ‰è®¸å¤šå°å·¥å…·çš„ç½‘ç«™ï¼Œç›®å‰åŒ…å«å››ä¸ªæ ¸å¿ƒæ¿å—ï¼š</p>
                <p>1. æ˜¯wokalakaçš„å°å° å·¥å…·ç®± ï¼ï¼ˆåç»­åŠŸèƒ½æ•¬è¯·æœŸå¾…ï¼‰ï¼›</p>
                <p>2. BMIè®¡ç®—å™¨ï¼šè®¡ç®—å¹¶åé¦ˆè¯¦ç»†BMIçŠ¶æ€ï¼›</p>
                <p>3. ä¿„ç½—æ–¯æ–¹å—ï¼šç»å…¸æ€€æ—§æ¸¸æˆï¼Œæ”¯æŒé”®ç›˜æ“ä½œï¼Œå·²é€‚é…æ‰‹æœºï¼›</p>
                <p>4. çˆ½ç‰ˆä¿„ç½—æ–¯æ–¹å—ï¼šåœ¨ç»å…¸ç‰ˆåŸºç¡€ä¸Šå¢åŠ äº†ä¾¿æ·åŠŸèƒ½ï¼›</p>
                <p>5. åŸºç¡€è®¡ç®—å™¨ï¼šæ”¯æŒåŠ å‡ä¹˜é™¤ã€å¼€æ ¹å·ã€å¹³æ–¹ç­‰åŸºç¡€è¿ç®—ï¼›</p>
                <p>ç½‘ç«™é‡‡ç”¨ç®€æ´ç¾è§‚çš„è®¾è®¡é£æ ¼ï¼Œé€‚é…ç”µè„‘å’Œæ‰‹æœºç­‰å¤šç§è®¾å¤‡ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥ä¾¿æ·åˆæœ‰è¶£çš„ä½¿ç”¨ä½“éªŒï½</p>
            </div>
            <div class="intro-highlights">
                <div class="highlight-card animate__animated animate__delay-100 animate__slideInUp">
                    <h3>ä¸ªæ€§åŒ–BMIå·¥å…·</h3>
                    <p>å›½é™…é€šç”¨çš„è¡¡é‡äººä½“èƒ–ç˜¦ç¨‹åº¦ä¸å¥åº·çŠ¶å†µçš„æ ‡å‡†ã€‚å¿«æ¥æµ‹ä¸€æµ‹å§ï¼</p>
                </div>
                <div class="highlight-card animate__animated animate__delay-200 animate__slideInUp">
                    <h3>è¶£å‘³æ¸¸æˆ</h3>
                    <p>ç»å…¸ä¿„ç½—æ–¯æ–¹å—å’Œçˆ½ç‰ˆä¿„ç½—æ–¯æ–¹å—ï¼Œç”µè„‘å¯ä½¿ç”¨é”®ç›˜æ“ä½œï¼</p>
                </div>
                <div class="highlight-card animate__animated animate__delay-300 animate__slideInUp">
                    <h3>å®ç”¨å·¥å…·</h3>
                    <p>åŸºç¡€è®¡ç®—å™¨ï¼Œæ»¡è¶³æ—¥å¸¸è®¡ç®—éœ€æ±‚</p>
                </div>
            </div>
        </section>
        <section id="bmi" class="section">
            <div class="bmi-header">
                <h2>BMIè®¡ç®—å™¨</h2>
            </div>
            <div class="bmi-container">
                <h1>æ¬¢è¿ä½¿ç”¨BMIè®¡ç®—å™¨</h1>
                <div class="input-box">
                    <label>è¯·è¾“å…¥ä½ çš„åå­—ï¼š</label><br>
                    <input type="text" id="name" placeholder="ä¾‹å¦‚ï¼šå¥ˆå¥ˆ">
                </div>
                <div class="input-box">
                    <label>è¯·è¾“å…¥ä½ çš„ä½“é‡(kg)ï¼š</label><br>
                    <input type="number" id="weight" step="0.1" placeholder="ä¾‹å¦‚ï¼š45">
                </div>
                <div class="input-box">
                    <label>è¯·è¾“å…¥ä½ çš„èº«é«˜(m)ï¼š</label><br>
                    <input type="number" id="height" step="0.01" placeholder="ä¾‹å¦‚ï¼š1.70 å•ä½æ˜¯m">
                </div>
                <button onclick="calculateBMI()">è®¡ç®—BMI</button>
                <div id="bmi-result"></div>
                <div class="bmi-history">
                    <h3>è®¡ç®—å†å²</h3>
                    <div class="history-list" id="bmi-history-list">
                        <div class="history-item">æš‚æ— å†å²è®°å½•</div>
                    </div>
                </div>
            </div>
        </section>
        <section id="tetris" class="section">
            <div class="tetris-header">
                <h2>ç»å…¸ä¿„ç½—æ–¯æ–¹å—</h2>
            </div>
            <div class="tetris-container">
                <div class="tetris-main">
                    <canvas id="tetris-board" class="tetris-board" width="300" height="600"></canvas>
                    <div class="tetris-info-mobile">
                        <div class="tetris-info">
                            <h3>åˆ†æ•°</h3>
                            <p id="score-mobile">0</p>
                        </div>
                        <div class="tetris-info">
                            <h3>ç­‰çº§</h3>
                            <p id="level-mobile">1</p>
                        </div>
                    </div>
                </div>
                <div class="tetris-sidebar-pc">
                    <div class="tetris-info">
                        <h3>åˆ†æ•°</h3>
                        <p id="score-pc">0</p>
                    </div>
                    <div class="tetris-info">
                        <h3>ç­‰çº§</h3>
                        <p id="level-pc">1</p>
                    </div>
                    <div class="tetris-controls-pc">
                        <button class="tetris-btn-pc" onclick="tetris.moveLeft()">â† å·¦ç§»</button>
                        <button class="tetris-btn-pc" onclick="tetris.moveRight()">â†’ å³ç§»</button>
                        <button class="tetris-btn-pc" onclick="tetris.rotate()">â†‘ æ—‹è½¬</button>
                        <button class="tetris-btn-pc" onclick="tetris.moveDown()">â†“ ä¸‹ç§»</button>
                        <button class="tetris-btn-pc" onclick="tetris.dropToBottom()">â¬ ä¸€é”®ä¸‹è½</button>
                        <button class="tetris-btn-pc" onclick="tetris.startGame()">å¼€å§‹æ¸¸æˆ</button>
                        <button class="tetris-btn-pc" onclick="tetris.pauseGame()">æš‚åœ/ç»§ç»­</button>
                    </div>
                    <div class="controls-tip">
                        æ”¯æŒé”®ç›˜æ“ä½œï¼šâ†‘æ—‹è½¬ â†â†’ç§»åŠ¨ â†“ä¸‹ç§» ç©ºæ ¼å¿«é€Ÿä¸‹è½
                    </div>
                </div>
            </div>
            <div class="tetris-controls-mobile">
                <div class="control-row">
                    <button class="tetris-btn-mobile" onclick="tetris.moveLeft()">â†</button>
                    <button class="tetris-btn-mobile" onclick="tetris.rotate()">â†‘</button>
                    <button class="tetris-btn-mobile" onclick="tetris.moveRight()">â†’</button>
                </div>
                <div class="control-row">
                    <button class="tetris-btn-mobile" onclick="tetris.startGame()">å¼€å§‹</button>
                    <button class="tetris-btn-mobile" onclick="tetris.moveDown()">â†“</button>
                    <button class="tetris-btn-mobile" onclick="tetris.dropToBottom()">â¬</button>
                </div>
                <div class="control-row">
                    <button class="tetris-btn-mobile" onclick="tetris.pauseGame()">æš‚åœ</button>
                </div>
            </div>
        </section>
        <section id="tetris-fun" class="section">
            <div class="tetris-header">
                <h2>çˆ½ç‰ˆä¿„ç½—æ–¯æ–¹å—</h2>
            </div>
            <div class="tetris-container">
                <div class="tetris-main">
                    <canvas id="tetris-board-fun" class="tetris-board" width="300" height="600"></canvas>
                    <div class="tetris-info-mobile">
                        <div class="tetris-info">
                            <h3>åˆ†æ•°</h3>
                            <p id="score-mobile-fun">0</p>
                        </div>
                        <div class="tetris-info">
                            <h3>ç­‰çº§</h3>
                            <p id="level-mobile-fun">1</p>
                        </div>
                    </div>
                </div>
                <div class="tetris-sidebar-pc">
                    <div class="tetris-info">
                        <h3>åˆ†æ•°</h3>
                        <p id="score-pc-fun">0</p>
                    </div>
                    <div class="tetris-info">
                        <h3>ç­‰çº§</h3>
                        <p id="level-pc-fun">1</p>
                    </div>
                    <div class="tetris-controls-pc">
                        <button class="tetris-btn-pc" onclick="tetrisFun.moveLeft()">â† å·¦ç§»</button>
                        <button class="tetris-btn-pc" onclick="tetrisFun.moveRight()">â†’ å³ç§»</button>
                        <button class="tetris-btn-pc" onclick="tetrisFun.rotate()">â†‘ æ—‹è½¬</button>
                        <button class="tetris-btn-pc" onclick="tetrisFun.moveDown()">â†“ ä¸‹ç§»</button>
                        <button class="tetris-btn-pc special" onclick="tetrisFun.dropToBottom()">â¬ ä¸€é”®ä¸‹è½</button>
                        <button class="tetris-btn-pc special" onclick="tetrisFun.clearScreen()">ğŸ—‘ï¸ ä¸€é”®æ¸…å±</button>
                        <button class="tetris-btn-pc" onclick="tetrisFun.startGame()">å¼€å§‹æ¸¸æˆ</button>
                        <button class="tetris-btn-pc" onclick="tetrisFun.pauseGame()">æš‚åœ/ç»§ç»­</button>
                    </div>
                    <div class="controls-tip">
                        æ”¯æŒé”®ç›˜æ“ä½œï¼šâ†‘æ—‹è½¬ â†â†’ç§»åŠ¨ â†“ä¸‹ç§» ç©ºæ ¼å¿«é€Ÿä¸‹è½
                    </div>
                </div>
            </div>
            <div class="tetris-controls-mobile">
                <div class="control-row">
                    <button class="tetris-btn-mobile" onclick="tetrisFun.moveLeft()">â†</button>
                    <button class="tetris-btn-mobile" onclick="tetrisFun.rotate()">â†‘</button>
                    <button class="tetris-btn-mobile" onclick="tetrisFun.moveRight()">â†’</button>
                </div>
                <div class="control-row">
                    <button class="tetris-btn-mobile" onclick="tetrisFun.startGame()">å¼€å§‹</button>
                    <button class="tetris-btn-mobile" onclick="tetrisFun.moveDown()">â†“</button>
                    <button class="tetris-btn-mobile special" onclick="tetrisFun.dropToBottom()">â¬</button>
                </div>
                <div class="control-row">
                    <button class="tetris-btn-mobile" onclick="tetrisFun.pauseGame()">æš‚åœ</button>
                    <button class="tetris-btn-mobile special" onclick="tetrisFun.clearScreen()">ğŸ—‘ï¸</button>
                </div>
            </div>
        </section>
        <section id="calculator" class="section">
            <div class="calc-header">
                <h2>åŸºç¡€è®¡ç®—å™¨</h2>
            </div>
            <div class="calc-container">
                <input type="text" class="calc-display" id="calc-display" placeholder="0" spellcheck="false">
                <div class="calc-buttons">
                    <button class="calc-btn function" onclick="calc.clear()">AC</button>
                    <button class="calc-btn function" onclick="calc.backspace()">â†</button>
                    <button class="calc-btn operator" onclick="calc.append('%')">%</button>
                    <button class="calc-btn operator" onclick="calc.append('/')">Ã·</button>
                    
                    <button class="calc-btn" onclick="calc.append('7')">7</button>
                    <button class="calc-btn" onclick="calc.append('8')">8</button>
                    <button class="calc-btn" onclick="calc.append('9')">9</button>
                    <button class="calc-btn operator" onclick="calc.append('*')">Ã—</button>
                    
                    <button class="calc-btn" onclick="calc.append('4')">4</button>
                    <button class="calc-btn" onclick="calc.append('5')">5</button>
                    <button class="calc-btn" onclick="calc.append('6')">6</button>
                    <button class="calc-btn operator" onclick="calc.append('-')">-</button>
                    
                    <button class="calc-btn" onclick="calc.append('1')">1</button>
                    <button class="calc-btn" onclick="calc.append('2')">2</button>
                    <button class="calc-btn" onclick="calc.append('3')">3</button>
                    <button class="calc-btn operator" onclick="calc.append('+')">+</button>
                    
                    <button class="calc-btn" onclick="calc.append('0')">0</button>
                    <button class="calc-btn" onclick="calc.append('.')">.</button>
                    <button class="calc-btn function" onclick="calc.sqrt()">âˆš</button>
                    <button class="calc-btn function" onclick="calc.square()">xÂ²</button>
                    
                    <button class="calc-btn equal" onclick="calc.calculate()">=</button>
                </div>
                <div class="calc-tip">
                    æ”¯æŒé”®ç›˜è¾“å…¥æ•°å­—/ç¬¦å·
                </div>
            </div>
        </section>
    </div>

    <script>
        function toggleNavbar() {
            document.body.classList.toggle('nav-collapsed');
        }

        function switchSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
            document.querySelector(`.nav-link[href="#${sectionId}"]`).classList.add('active');
        }

        let bmiHistory = JSON.parse(localStorage.getItem('bmiHistory')) || [];
        function renderBMIHistory() {
            const listEl = document.getElementById('bmi-history-list');
            if (bmiHistory.length === 0) {
                listEl.innerHTML = '<div class="history-item">æš‚æ— å†å²è®°å½•</div>';
                return;
            }
            listEl.innerHTML = bmiHistory.map(item => `
                <div class="history-item">
                    <span>${item.name}ï¼š${item.bmi}(${item.status})</span>
                    <span>${item.time}</span>
                </div>
            `).join('');
        }
        function calculateBMI() {
            const name = document.getElementById('name').value;
            const weight = parseFloat(document.getElementById('weight').value);
            const height = parseFloat(document.getElementById('height').value);
            const resultEl = document.getElementById('bmi-result');

            if (!name || isNaN(weight) || isNaN(height) || weight <= 0 || height <= 0) {
                resultEl.textContent = 'è¯·è¾“å…¥æœ‰æ•ˆçš„å§“åã€ä½“é‡å’Œèº«é«˜ï¼';
                resultEl.className = 'show';
                resultEl.style.backgroundColor = '#ffeeee';
                resultEl.style.color = '#ff4444';
                return;
            }

            const bmi = (weight / (height * height)).toFixed(1);
            let status = '';
            let color = '';

            if (bmi < 18.5) {
                status = 'åç˜¦';
                color = '#ff9800';
            } else if (bmi < 24) {
                status = 'æ­£å¸¸';
                color = '#4CAF50';
            } else if (bmi < 28) {
                status = 'è¶…é‡';
                color = '#ff9800';
            } else {
                status = 'è‚¥èƒ–';
                color = '#ff4444';
            }

            resultEl.innerHTML = `${name}ï¼Œä½ çš„BMIå€¼ä¸º${bmi}ï¼Œå±äº${status}èŒƒå›´`;
            resultEl.className = 'show';
            resultEl.style.backgroundColor = '#f0f9ff';
            resultEl.style.color = color;

            bmiHistory.unshift({
                name,
                bmi,
                status,
                time: new Date().toLocaleString()
            });
            if (bmiHistory.length > 10) bmiHistory.pop();
            localStorage.setItem('bmiHistory', JSON.stringify(bmiHistory));
            renderBMIHistory();
        }
        renderBMIHistory();

        const tetris = {
            canvas: document.getElementById('tetris-board'),
            ctx: document.getElementById('tetris-board').getContext('2d'),
            width: 10,
            height: 20,
            cellSize: 30,
            board: [],
            currentPiece: null,
            score: 0,
            level: 1,
            lines: 0,
            gameInterval: null,
            isPlaying: false,
            isPaused: false,

            init() {
                if (window.innerWidth <= 768) {
                    this.cellSize = 24;
                }
                this.canvas.width = this.width * this.cellSize;
                this.canvas.height = this.height * this.cellSize;
                this.resetBoard();
                this.generatePiece();
                this.drawBoard();
                this.bindKeyEvents();
            },

            resetBoard() {
                this.board = Array(this.height).fill().map(() => Array(this.width).fill(0));
                this.score = 0;
                this.level = 1;
                this.lines = 0;
                this.updateScore();
            },

            generatePiece() {
                const shapes = [
                    [[1, 1, 1, 1]], 
                    [[1, 1], [1, 1]], 
                    [[1, 1, 1], [0, 1, 0]], 
                    [[1, 1, 1], [1, 0, 0]], 
                    [[1, 1, 1], [0, 0, 1]], 
                    [[0, 1, 1], [1, 1, 0]], 
                    [[1, 1, 0], [0, 1, 1]]  
                ];
                const colors = ['#667eea', '#764ba2', '#ff4d6d', '#4CAF50', '#ff9800', '#2196F3', '#9C27B0'];
                const shapeIndex = Math.floor(Math.random() * shapes.length);
                
                this.currentPiece = {
                    shape: shapes[shapeIndex],
                    color: colors[shapeIndex],
                    x: Math.floor((this.width - shapes[shapeIndex][0].length) / 2),
                    y: 0
                };

                if (!this.isValidMove(0, 0)) {
                    this.gameOver();
                }
            },

            isValidMove(offsetX, offsetY) {
                return this.currentPiece.shape.every((row, y) => {
                    return row.every((cell, x) => {
                        if (!cell) return true;
                        const newX = this.currentPiece.x + x + offsetX;
                        const newY = this.currentPiece.y + y + offsetY;
                        return newX >= 0 && newX < this.width && newY < this.height && (newY < 0 || !this.board[newY][newX]);
                    });
                });
            },

            mergePiece() {
                this.currentPiece.shape.forEach((row, y) => {
                    row.forEach((cell, x) => {
                        if (cell) {
                            const newY = this.currentPiece.y + y;
                            const newX = this.currentPiece.x + x;
                            if (newY >= 0) this.board[newY][newX] = this.currentPiece.color;
                        }
                    });
                });
                this.clearLines();
                this.generatePiece();
            },

            clearLines() {
                let linesCleared = 0;
                this.board = this.board.filter(row => {
                    if (row.every(cell => cell)) {
                        linesCleared++;
                        return false;
                    }
                    return true;
                });
                while (this.board.length < this.height) {
                    this.board.unshift(Array(this.width).fill(0));
                }
                if (linesCleared > 0) {
                    this.score += linesCleared * 100 * this.level;
                    this.lines += linesCleared;
                    if (this.lines >= this.level * 10) {
                        this.level++;
                        clearInterval(this.gameInterval);
                        this.gameInterval = setInterval(() => this.moveDown(), 1000 - (this.level - 1) * 100);
                    }
                    this.updateScore();
                }
            },

            updateScore() {
                document.getElementById('score-pc').textContent = this.score;
                document.getElementById('score-mobile').textContent = this.score;
                document.getElementById('level-pc').textContent = this.level;
                document.getElementById('level-mobile').textContent = this.level;
            },

            drawBoard() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                this.ctx.strokeStyle = '#e0e0e0';
                this.ctx.lineWidth = 1;
                for (let x = 0; x <= this.canvas.width; x += this.cellSize) {
                    this.ctx.beginPath();
                    this.ctx.moveTo(x, 0);
                    this.ctx.lineTo(x, this.canvas.height);
                    this.ctx.stroke();
                }
                for (let y = 0; y <= this.canvas.height; y += this.cellSize) {
                    this.ctx.beginPath();
                    this.ctx.moveTo(0, y);
                    this.ctx.lineTo(this.canvas.width, y);
                    this.ctx.stroke();
                }

                this.board.forEach((row, y) => {
                    row.forEach((color, x) => {
                        if (color) {
                            this.ctx.fillStyle = color;
                            this.ctx.fillRect(
                                x * this.cellSize + 1,
                                y * this.cellSize + 1,
                                this.cellSize - 1,
                                this.cellSize - 1
                            );
                        }
                    });
                });

                if (this.currentPiece) {
                    this.ctx.fillStyle = this.currentPiece.color;
                    this.currentPiece.shape.forEach((row, y) => {
                        row.forEach((cell, x) => {
                            if (cell) {
                                const drawX = (this.currentPiece.x + x) * this.cellSize + 1;
                                const drawY = (this.currentPiece.y + y) * this.cellSize + 1;
                                if (drawY >= 0) {
                                    this.ctx.fillRect(
                                        drawX,
                                        drawY,
                                        this.cellSize - 1,
                                        this.cellSize - 1
                                    );
                                }
                            }
                        });
                    });
                }
            },

            moveLeft() {
                if (!this.isPlaying || this.isPaused) return;
                if (this.isValidMove(-1, 0)) {
                    this.currentPiece.x--;
                    this.drawBoard();
                }
            },

            moveRight() {
                if (!this.isPlaying || this.isPaused) return;
                if (this.isValidMove(1, 0)) {
                    this.currentPiece.x++;
                    this.drawBoard();
                }
            },

            rotate() {
                if (!this.isPlaying || this.isPaused) return;
                const originalShape = this.currentPiece.shape;
                const rows = originalShape.length;
                const cols = originalShape[0].length;
                const rotated = Array(cols).fill().map(() => Array(rows).fill(0));
                
                for (let y = 0; y < rows; y++) {
                    for (let x = 0; x < cols; x++) {
                        rotated[x][rows - 1 - y] = originalShape[y][x];
                    }
                }
                
                this.currentPiece.shape = rotated;
                if (!this.isValidMove(0, 0)) {
                    if (this.isValidMove(1, 0)) {
                        this.currentPiece.x++;
                    } else if (this.isValidMove(-1, 0)) {
                        this.currentPiece.x--;
                    } else if (this.isValidMove(0, 1)) {
                        this.currentPiece.y++;
                    } else {
                        this.currentPiece.shape = originalShape;
                    }
                }
                this.drawBoard();
            },

            moveDown() {
                if (!this.isPlaying || this.isPaused) return;
                if (this.isValidMove(0, 1)) {
                    this.currentPiece.y++;
                    this.drawBoard();
                } else {
                    this.mergePiece();
                }
            },

            dropToBottom() {
                if (!this.isPlaying || this.isPaused) return;
                while (this.isValidMove(0, 1)) {
                    this.currentPiece.y++;
                }
                this.mergePiece();
                this.drawBoard();
            },

            startGame() {
                if (this.isPlaying) return;
                this.isPlaying = true;
                this.isPaused = false;
                this.resetBoard();
                this.generatePiece();
                this.gameInterval = setInterval(() => this.moveDown(), 1000);
                this.drawBoard();
            },

            pauseGame() {
                if (!this.isPlaying) return;
                this.isPaused = !this.isPaused;
                if (this.isPaused) {
                    clearInterval(this.gameInterval);
                } else {
                    this.gameInterval = setInterval(() => this.moveDown(), 1000 - (this.level - 1) * 100);
                }
            },

            gameOver() {
                clearInterval(this.gameInterval);
                this.isPlaying = false;
                alert(`æ¸¸æˆç»“æŸï¼ä½ çš„å¾—åˆ†æ˜¯: ${this.score}ï¼Œç­‰çº§: ${this.level}`);
                this.resetBoard();
                this.drawBoard();
            },

            bindKeyEvents() {
                document.addEventListener('keydown', (e) => {
                    if (!this.isPlaying) return;
                    
                    switch (e.key) {
                        case 'ArrowLeft':
                            this.moveLeft();
                            e.preventDefault();
                            break;
                        case 'ArrowRight':
                            this.moveRight();
                            e.preventDefault();
                            break;
                        case 'ArrowUp':
                            this.rotate();
                            e.preventDefault();
                            break;
                        case 'ArrowDown':
                            this.moveDown();
                            e.preventDefault();
                            break;
                        case ' ':
                            this.dropToBottom();
                            e.preventDefault();
                            break;
                        case 'p':
                        case 'P':
                            this.pauseGame();
                            e.preventDefault();
                            break;
                    }
                });
            }
        };

        const tetrisFun = {
            canvas: document.getElementById('tetris-board-fun'),
            ctx: document.getElementById('tetris-board-fun').getContext('2d'),
            width: 10,
            height: 20,
            cellSize: 30,
            board: [],
            currentPiece: null,
            score: 0,
            level: 1,
            lines: 0,
            gameInterval: null,
            isPlaying: false,
            isPaused: false,

            init() {
                if (window.innerWidth <= 768) {
                    this.cellSize = 24;
                }
                this.canvas.width = this.width * this.cellSize;
                this.canvas.height = this.height * this.cellSize;
                this.resetBoard();
                this.generatePiece();
                this.drawBoard();
                this.bindKeyEvents();
            },

            resetBoard() {
                this.board = Array(this.height).fill().map(() => Array(this.width).fill(0));
                this.score = 0;
                this.level = 1;
                this.lines = 0;
                this.updateScore();
            },

            clearScreen() {
                if (!this.isPlaying || this.isPaused) return;
                this.board = Array(this.height).fill().map(() => Array(this.width).fill(0));
                this.drawBoard();
            },

            generatePiece() {
                const shapes = [
                    [[1, 1, 1, 1]], 
                    [[1, 1], [1, 1]], 
                    [[1, 1, 1], [0, 1, 0]], 
                    [[1, 1, 1], [1, 0, 0]], 
                    [[1, 1, 1], [0, 0, 1]], 
                    [[0, 1, 1], [1, 1, 0]], 
                    [[1, 1, 0], [0, 1, 1]]  
                ];
                const colors = ['#667eea', '#764ba2', '#ff4d6d', '#4CAF50', '#ff9800', '#2196F3', '#9C27B0'];
                const shapeIndex = Math.floor(Math.random() * shapes.length);
                
                this.currentPiece = {
                    shape: shapes[shapeIndex],
                    color: colors[shapeIndex],
                    x: Math.floor((this.width - shapes[shapeIndex][0].length) / 2),
                    y: 0
                };

                if (!this.isValidMove(0, 0)) {
                    this.gameOver();
                }
            },

            isValidMove(offsetX, offsetY) {
                return this.currentPiece.shape.every((row, y) => {
                    return row.every((cell, x) => {
                        if (!cell) return true;
                        const newX = this.currentPiece.x + x + offsetX;
                        const newY = this.currentPiece.y + y + offsetY;
                        return newX >= 0 && newX < this.width && newY < this.height && (newY < 0 || !this.board[newY][newX]);
                    });
                });
            },

            mergePiece() {
                this.currentPiece.shape.forEach((row, y) => {
                    row.forEach((cell, x) => {
                        if (cell) {
                            const newY = this.currentPiece.y + y;
                            const newX = this.currentPiece.x + x;
                            if (newY >= 0) this.board[newY][newX] = this.currentPiece.color;
                        }
                    });
                });
                this.clearLines();
                this.generatePiece();
            },

            clearLines() {
                let linesCleared = 0;
                this.board = this.board.filter(row => {
                    if (row.every(cell => cell)) {
                        linesCleared++;
                        return false;
                    }
                    return true;
                });
                while (this.board.length < this.height) {
                    this.board.unshift(Array(this.width).fill(0));
                }
                if (linesCleared > 0) {
                    this.score += linesCleared * 100 * this.level;
                    this.lines += linesCleared;
                    if (this.lines >= this.level * 10) {
                        this.level++;
                        clearInterval(this.gameInterval);
                        this.gameInterval = setInterval(() => this.moveDown(), 800 - (this.level - 1) * 100);
                    }
                    this.updateScore();
                }
            },

            updateScore() {
                document.getElementById('score-pc-fun').textContent = this.score;
                document.getElementById('score-mobile-fun').textContent = this.score;
                document.getElementById('level-pc-fun').textContent = this.level;
                document.getElementById('level-mobile-fun').textContent = this.level;
            },

            drawBoard() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                this.ctx.strokeStyle = '#e0e0e0';
                this.ctx.lineWidth = 1;
                for (let x = 0; x <= this.canvas.width; x += this.cellSize) {
                    this.ctx.beginPath();
                    this.ctx.moveTo(x, 0);
                    this.ctx.lineTo(x, this.canvas.height);
                    this.ctx.stroke();
                }
                for (let y = 0; y <= this.canvas.height; y += this.cellSize) {
                    this.ctx.beginPath();
                    this.ctx.moveTo(0, y);
                    this.ctx.lineTo(this.canvas.width, y);
                    this.ctx.stroke();
                }

                this.board.forEach((row, y) => {
                    row.forEach((color, x) => {
                        if (color) {
                            this.ctx.fillStyle = color;
                            this.ctx.fillRect(
                                x * this.cellSize + 1,
                                y * this.cellSize + 1,
                                this.cellSize - 1,
                                this.cellSize - 1
                            );
                        }
                    });
                });

                if (this.currentPiece) {
                    this.ctx.fillStyle = this.currentPiece.color;
                    this.currentPiece.shape.forEach((row, y) => {
                        row.forEach((cell, x) => {
                            if (cell) {
                                const drawX = (this.currentPiece.x + x) * this.cellSize + 1;
                                const drawY = (this.currentPiece.y + y) * this.cellSize + 1;
                                if (drawY >= 0) {
                                    this.ctx.fillRect(
                                        drawX,
                                        drawY,
                                        this.cellSize - 1,
                                        this.cellSize - 1
                                    );
                                }
                            }
                        });
                    });
                }
            },

            moveLeft() {
                if (!this.isPlaying || this.isPaused) return;
                if (this.isValidMove(-1, 0)) {
                    this.currentPiece.x--;
                    this.drawBoard();
                }
            },

            moveRight() {
                if (!this.isPlaying || this.isPaused) return;
                if (this.isValidMove(1, 0)) {
                    this.currentPiece.x++;
                    this.drawBoard();
                }
            },

            rotate() {
                if (!this.isPlaying || this.isPaused) return;
                const originalShape = this.currentPiece.shape;
                const rows = originalShape.length;
                const cols = originalShape[0].length;
                const rotated = Array(cols).fill().map(() => Array(rows).fill(0));
                
                for (let y = 0; y < rows; y++) {
                    for (let x = 0; x < cols; x++) {
                        rotated[x][rows - 1 - y] = originalShape[y][x];
                    }
                }
                
                this.currentPiece.shape = rotated;
                if (!this.isValidMove(0, 0)) {
                    if (this.isValidMove(1, 0)) {
                        this.currentPiece.x++;
                    } else if (this.isValidMove(-1, 0)) {
                        this.currentPiece.x--;
                    } else if (this.isValidMove(0, 1)) {
                        this.currentPiece.y++;
                    } else {
                        this.currentPiece.shape = originalShape;
                    }
                }
                this.drawBoard();
            },

            moveDown() {
                if (!this.isPlaying || this.isPaused) return;
                if (this.isValidMove(0, 1)) {
                    this.currentPiece.y++;
                    this.drawBoard();
                } else {
                    this.mergePiece();
                }
            },

            dropToBottom() {
                if (!this.isPlaying || this.isPaused) return;
                while (this.isValidMove(0, 1)) {
                    this.currentPiece.y++;
                }
                this.mergePiece();
                this.drawBoard();
            },

            startGame() {
                if (this.isPlaying) return;
                this.isPlaying = true;
                this.isPaused = false;
                this.resetBoard();
                this.generatePiece();
                this.gameInterval = setInterval(() => this.moveDown(), 800);
                this.drawBoard();
            },

            pauseGame() {
                if (!this.isPlaying) return;
                this.isPaused = !this.isPaused;
                if (this.isPaused) {
                    clearInterval(this.gameInterval);
                } else {
                    this.gameInterval = setInterval(() => this.moveDown(), 800 - (this.level - 1) * 100);
                }
            },

            gameOver() {
                clearInterval(this.gameInterval);
                this.isPlaying = false;
                alert(`æ¸¸æˆç»“æŸï¼ä½ çš„å¾—åˆ†æ˜¯: ${this.score}ï¼Œç­‰çº§: ${this.level}`);
                this.resetBoard();
                this.drawBoard();
            },

            bindKeyEvents() {
                document.addEventListener('keydown', (e) => {
                    if (!this.isPlaying) return;
                    
                    switch (e.key) {
                        case 'ArrowLeft':
                            this.moveLeft();
                            e.preventDefault();
                            break;
                        case 'ArrowRight':
                            this.moveRight();
                            e.preventDefault();
                            break;
                        case 'ArrowUp':
                            this.rotate();
                            e.preventDefault();
                            break;
                        case 'ArrowDown':
                            this.moveDown();
                            e.preventDefault();
                            break;
                        case ' ':
                            this.dropToBottom();
                            e.preventDefault();
                            break;
                        case 'p':
                        case 'P':
                            this.pauseGame();
                            e.preventDefault();
                            break;
                    }
                });
            }
        };

        const calc = {
            display: document.getElementById('calc-display'),
            heartSymbols: ['â¤ï¸', 'ğŸ§¡', 'ğŸ’›', 'ğŸ’š', 'ğŸ’™', 'ğŸ’œ', 'â£ï¸', 'ğŸ’•', 'ğŸ’', 'ğŸ’“', 'ğŸ’—', 'ğŸ’–', 'ğŸ’˜', 'ğŸ’'],
            heartsContainer: document.querySelector('.hearts-container'),
            
            append(value) {
                if (this.display.value === '0' && !isNaN(value) && value !== '.') {
                    this.display.value = value;
                } else {
                    this.display.value += value;
                }
                this.checkSpecialInput();
            },
            
            clear() {
                this.display.value = '0';
            },
            
            backspace() {
                if (this.display.value.length > 1) {
                    this.display.value = this.display.value.slice(0, -1);
                } else {
                    this.display.value = '0';
                }
                this.checkSpecialInput();
            },
            
            sqrt() {
                try {
                    const value = eval(this.display.value);
                    this.display.value = Math.sqrt(value).toFixed(6).replace(/\.?0+$/, '');
                } catch (e) {
                    this.display.value = 'é”™è¯¯';
                }
            },
            
            square() {
                try {
                    const value = eval(this.display.value);
                    this.display.value = (value * value).toFixed(6).replace(/\.?0+$/, '');
                } catch (e) {
                    this.display.value = 'é”™è¯¯';
                }
            },
            
            calculate() {
                const currentValue = this.display.value;
                
                if (currentValue.includes('å¥ˆå¥ˆç†Š') || currentValue.includes('æŠ«è¨è€å¤´')) {
                    this.display.value = '520';
                    this.createHearts(500);
                    this.display.blur();
                    this.display.readOnly = true;
                    setTimeout(() => {
                        this.display.readOnly = false;
                    }, 5000);
                    return;
                }
                
                try {
                    let expression = currentValue.replace(/Ã—/g, '*').replace(/Ã·/g, '/');
                    let result = eval(expression);
                    
                    if (result === Infinity || result === -Infinity) {
                        this.display.value = 'é”™è¯¯';
                    } else {
                        this.display.value = result.toFixed(6).replace(/\.?0+$/, '');
                    }
                } catch (e) {
                    this.display.value = 'é”™è¯¯';
                }
            },
            
            checkSpecialInput() {
                const currentValue = this.display.value;
                if (currentValue.includes('å¥ˆå¥ˆç†Š') || currentValue.includes('æŠ«è¨è€å¤´')) {
                    this.display.blur();
                    this.display.readOnly = true;
                    setTimeout(() => {
                        this.display.readOnly = false;
                    }, 5000);
                }
            },
            
            createHearts(count) {
                const container = this.heartsContainer;
                const centerX = window.innerWidth / 2;
                const centerY = window.innerHeight / 2;
                
                for (let i = 0; i < count; i++) {
                    setTimeout(() => {
                        const heart = document.createElement('div');
                        heart.classList.add('heart');
                        
                        const symbol = this.heartSymbols[Math.floor(Math.random() * this.heartSymbols.length)];
                        heart.textContent = symbol;
                        
                        heart.style.left = `${centerX}px`;
                        heart.style.top = `${centerY}px`;
                        
                        const size = 16 + Math.random() * 24;
                        heart.style.fontSize = `${size}px`;
                        
                        const angle = Math.random() * Math.PI * 2;
                        const distance = 100 + Math.random() * 600;
                        const x = Math.cos(angle) * distance;
                        const y = Math.sin(angle) * distance;
                        
                        heart.style.setProperty('--x', x);
                        heart.style.setProperty('--y', y);
                        
                        const duration = 3 + Math.random() * 5;
                        heart.style.animationDuration = `${duration}s`;
                        
                        heart.style.animationDelay = `${Math.random() * 3}s`;
                        
                        container.appendChild(heart);
                        
                        setTimeout(() => {
                            heart.remove();
                        }, duration * 1000);
                    }, i * 2);
                }
            }
        };

        document.addEventListener('keydown', (e) => {
            if (document.activeElement === calc.display) {
                const key = e.key;
                if (/[0-9]/.test(key)) {
                    e.preventDefault();
                    calc.append(key);
                } else if (key === '+' || key === '-' || key === '*' || key === '/') {
                    e.preventDefault();
                    calc.append(key === '*' ? 'Ã—' : key === '/' ? 'Ã·' : key);
                } else if (key === '.') {
                    e.preventDefault();
                    calc.append('.');
                } else if (key === 'Enter') {
                    e.preventDefault();
                    calc.calculate();
                } else if (key === 'Backspace') {
                    e.preventDefault();
                    calc.backspace();
                } else if (key === 'Escape') {
                    e.preventDefault();
                    calc.clear();
                }
            }
        });

        window.onload = () => {
            tetris.init();
            tetrisFun.init();
            
            window.addEventListener('resize', () => {
                tetris.init();
                tetrisFun.init();
            });
        };
    </script>
</body>
</html>