<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wpfçš„å·¥å…·ç®±</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, sans-serif;
        }
        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            overflow-x: hidden;
            padding-left: 240px;
            transition: padding-left 0.3s ease;
        }
        .nav-toggle {
            position: fixed;
            left: 20px;
            top: 20px;
            width: 40px;
            height: 40px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            z-index: 101;
            transition: all 0.3s ease;
        }
        .nav-toggle::before {
            content: "â‰¡";
            font-weight: bold;
            font-size: 22px;
        }
        .nav-toggle:hover {
            transform: scale(1.1);
        }
        body.nav-collapsed {
            padding-left: 0;
        }
        body.nav-collapsed .navbar {
            transform: translateX(-100%);
        }
        .navbar {
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            width: 240px;
            background: rgba(255, 255, 255, 0.98);
            box-shadow: 2px 0 15px rgba(0, 0, 0, 0.15);
            padding: 30px 0;
            display: flex;
            flex-direction: column;
            z-index: 100;
            transition: transform 0.3s ease;
            overflow: hidden;
        }
        .navbar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid #eee;
            margin-bottom: 20px;
        }
        .navbar-header h1 {
            font-size: 20px;
            color: #667eea;
            margin-bottom: 5px;
        }
        .navbar-header p {
            font-size: 14px;
            color: #777;
        }
        @media (max-width: 768px) {
            .navbar {
                width: 200px;
                transform: translateX(-100%);
            }
            body {
                padding-left: 0;
            }
            body.nav-expanded .navbar {
                transform: translateX(0);
            }
        }
        .nav-list {
            list-style: none;
            flex: 1;
        }
        .nav-item {
            margin: 5px 0;
        }
        .nav-link {
            display: block;
            padding: 12px 30px;
            color: #555;
            text-decoration: none;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }
        .nav-link:hover, .nav-link.active {
            color: #667eea;
            background: rgba(102, 126, 234, 0.1);
            border-left: 3px solid #667eea;
            padding-left: 35px;
        }
        .main-content {
            padding: 50px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .section {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            width: 100%;
            max-width: 800px;
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }
        .section.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        .intro-header {
            text-align: center;
            margin-bottom: 30px;
        }
        .intro-header h2 {
            font-size: 32px;
            color: #333;
            margin-bottom: 10px;
            position: relative;
            display: inline-block;
        }
        .intro-header h2::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 2px;
            margin: 10px auto 0;
        }
        .intro-content {
            line-height: 1.8;
            font-size: 16px;
            color: #555;
        }
        .intro-content p {
            margin-bottom: 20px;
        }
        .intro-highlights {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 30px;
        }
        .highlight-card {
            flex: 1;
            min-width: 200px;
            padding: 20px;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 12px;
            border: 1px solid #eee;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .highlight-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.15);
        }
        .highlight-card h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 18px;
        }
        .highlight-card p {
            font-size: 14px;
            color: #666;
            margin-bottom: 0;
        }
        .bmi-header {
            text-align: center;
            margin-bottom: 30px;
        }
        .bmi-header h2 {
            font-size: 28px;
            color: #333;
        }
        .bmi-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        .input-box {
            margin: 15px 0;
        }
        .input-box label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }
        .bmi-container input {
            padding: 8px;
            width: 200px;
            font-size: 16px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            outline: none;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        .bmi-container input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        }
        .bmi-container button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .bmi-container button:hover {
            background-color: #45a049;
            transform: scale(1.05);
        }
        #bmi-result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            font-size: 18px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        #bmi-result.show {
            opacity: 1;
        }
        .bmi-history {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        .bmi-history h3 {
            font-size: 18px;
            color: #667eea;
            margin-bottom: 15px;
        }
        .history-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 10px;
        }
        .history-item {
            padding: 8px;
            border-bottom: 1px solid #f0f0f0;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
        }
        .history-item:last-child {
            border-bottom: none;
        }
        .tetris-header {
            text-align: center;
            margin-bottom: 20px;
        }
        .tetris-header h2 {
            font-size: 28px;
            color: #333;
        }
        .tetris-container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 30px;
            flex-wrap: wrap;
            width: 100%;
            margin-bottom: 20px;
        }
        .tetris-main {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .tetris-board {
            border: 3px solid #667eea;
            border-radius: 8px;
            background: #f8f9fa;
            max-width: 90vw;
            height: auto;
            background-image: 
                linear-gradient(to right, #e0e0e0 1px, transparent 1px),
                linear-gradient(to bottom, #e0e0e0 1px, transparent 1px);
            background-size: 30px 30px;
        }
        .tetris-sidebar-pc {
            display: flex;
            flex-direction: column;
            gap: 20px;
            min-width: 180px;
        }
        .tetris-info {
            padding: 15px;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 8px;
            text-align: center;
            transition: box-shadow 0.3s ease;
        }
        .tetris-info:hover {
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
        }
        .tetris-info h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 16px;
        }
        .tetris-info p {
            font-size: 24px;
            font-weight: 600;
            color: #333;
        }
        .tetris-controls-pc {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .tetris-btn-pc {
            padding: 10px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: opacity 0.3s ease, transform 0.2s ease;
        }
        .tetris-btn-pc:hover {
            opacity: 0.9;
            transform: scale(1.03);
        }
        .tetris-btn-pc.special {
            background: linear-gradient(90deg, #f0a000, #f00000);
        }
        .controls-tip {
            margin-top: 10px;
            font-size: 13px;
            color: #666;
            text-align: center;
        }
        .tetris-info-mobile {
            display: none;
            flex-direction: row;
            gap: 20px;
            margin-top: 15px;
            width: 100%;
            justify-content: center;
        }
        .tetris-controls-mobile {
            display: none;
            margin-top: 20px;
            width: 100%;
        }
        .control-row {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        .tetris-btn-mobile {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            color: white;
            border: none;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.3s ease, transform 0.2s ease;
        }
        .tetris-btn-mobile:hover {
            opacity: 0.9;
            transform: scale(1.05);
        }
        .tetris-btn-mobile.special {
            background: linear-gradient(90deg, #f0a000, #f00000);
        }
        @media (max-width: 768px) {
            .tetris-container {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            .tetris-sidebar-pc {
                display: none;
            }
            .tetris-info-mobile {
                display: flex;
            }
            .tetris-controls-mobile {
                display: block;
            }
            #tetris-board, #tetris-board-fun {
                width: 240px !important;
                height: 480px !important;
                background-size: 24px 24px;
            }
        }
        @media (min-width: 769px) {
            .tetris-info-mobile,
            .tetris-controls-mobile {
                display: none;
            }
        }
        .calc-header {
            text-align: center;
            margin-bottom: 30px;
        }
        .calc-header h2 {
            font-size: 28px;
            color: #333;
        }
        .calc-container {
            max-width: 500px;
            margin: 0 auto;
            padding: 25px;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 12px;
        }
        .calc-display {
            width: 100%;
            height: 80px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 28px;
            text-align: right;
            overflow-x: auto;
            outline: none;
            pointer-events: auto;
            cursor: text;
        }
        .calc-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }
        .calc-btn {
            padding: 18px;
            font-size: 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background: #f1f3f5;
            color: #333;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .calc-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .calc-btn.operator {
            background: linear-gradient(90deg, #667eea, #764ba2);
            color: white;
        }
        .calc-btn.function {
            background: linear-gradient(90deg, #f0a000, #f08000);
            color: white;
        }
        .calc-btn.equal {
            background: #4CAF50;
            color: white;
            grid-column: span 2;
        }
        .calc-tip {
            margin-top: 20px;
            font-size: 13px;
            color: #666;
            text-align: center;
        }
        /* çˆ±å¿ƒå½©è›‹æ ·å¼ */
        .heart {
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            animation: heartFly 1.5s ease-out forwards;
        }
        @keyframes heartFly {
            0% {
                opacity: 1;
                transform: scale(1) translate(0, 0);
            }
            100% {
                opacity: 0;
                transform: scale(calc(0.5 + var(--scale))) translate(calc(var(--x) * 1px), -800px);
            }
        }
    </style>
</head>
<body>
    <button class="nav-toggle" onclick="toggleNavbar()"></button>
    <nav class="navbar">
        <div class="navbar-header">
            <h1>wpfçš„å·¥å…·ç®±</h1>
            <p>å°å°å·¥å…·</p>
        </div>
        <ul class="nav-list">
            <li class="nav-item">
                <a href="#intro" class="nav-link active" onclick="switchSection('intro')">å…³äºwebsite</a>
            </li>
            <li class="nav-item">
                <a href="#bmi" class="nav-link" onclick="switchSection('bmi')">BMIè®¡ç®—å™¨</a>
            </li>
            <li class="nav-item">
                <a href="#tetris" class="nav-link" onclick="switchSection('tetris')">ä¿„ç½—æ–¯æ–¹å—</a>
            </li>
            <li class="nav-item">
                <a href="#tetris-fun" class="nav-link" onclick="switchSection('tetris-fun')">çˆ½ç‰ˆä¿„ç½—æ–¯æ–¹å—</a>
            </li>
            <li class="nav-item">
                <a href="#calculator" class="nav-link" onclick="switchSection('calculator')">åŸºç¡€è®¡ç®—å™¨</a>
            </li>
        </ul>
    </nav>
    <div class="main-content">
        <section id="intro" class="section active animate__animated animate__fadeIn">
            <div class="intro-header">
                <h2>å…³äºè¿™ä¸ªç½‘ç«™</h2>
            </div>
            <div class="intro-content">
                <p>å¤§å®¶å¥½æˆ‘æ˜¯wpfï¼è¿™æ˜¯ä¸€ä¸ªæœ‰è®¸å¤šå°å·¥å…·çš„ç½‘ç«™ï¼Œç›®å‰åŒ…å«å››ä¸ªæ ¸å¿ƒæ¿å—ï¼š</p>
                <p>1. æ˜¯wokalakaçš„å°å° å·¥å…·ç®± ï¼ï¼ˆåç»­åŠŸèƒ½æ•¬è¯·æœŸå¾…ï¼‰ï¼›</p>
                <p>2. BMIè®¡ç®—å™¨ï¼šè®¡ç®—å¹¶åé¦ˆè¯¦ç»†BMIçŠ¶æ€ï¼›</p>
                <p>3. ä¿„ç½—æ–¯æ–¹å—ï¼šç»å…¸æ€€æ—§æ¸¸æˆï¼Œæ”¯æŒé”®ç›˜æ“ä½œï¼Œå·²é€‚é…æ‰‹æœºï¼›</p>
                <p>4. çˆ½ç‰ˆä¿„ç½—æ–¯æ–¹å—ï¼šåœ¨ç»å…¸ç‰ˆåŸºç¡€ä¸Šå¢åŠ äº†ä¾¿æ·åŠŸèƒ½ï¼›</p>
                <p>5. åŸºç¡€è®¡ç®—å™¨ï¼šæ”¯æŒåŠ å‡ä¹˜é™¤ã€å¼€æ ¹å·ã€å¹³æ–¹ç­‰åŸºç¡€è¿ç®—ï¼›</p>
                <p>ç½‘ç«™é‡‡ç”¨ç®€æ´ç¾è§‚çš„è®¾è®¡é£æ ¼ï¼Œé€‚é…ç”µè„‘å’Œæ‰‹æœºç­‰å¤šç§è®¾å¤‡ï¼Œå¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥ä¾¿æ·åˆæœ‰è¶£çš„ä½¿ç”¨ä½“éªŒï½</p>
            </div>
            <div class="intro-highlights">
                <div class="highlight-card animate__animated animate__delay-100 animate__slideInUp">
                    <h3>ä¸ªæ€§åŒ–BMIå·¥å…·</h3>
                    <p>å›½é™…é€šç”¨çš„è¡¡é‡äººä½“èƒ–ç˜¦ç¨‹åº¦ä¸å¥åº·çŠ¶å†µçš„æ ‡å‡†ã€‚å¿«æ¥æµ‹ä¸€æµ‹å§ï¼</p>
                </div>
                <div class="highlight-card animate__animated animate__delay-200 animate__slideInUp">
                    <h3>è¶£å‘³æ¸¸æˆ</h3>
                    <p>ç»å…¸ä¿„ç½—æ–¯æ–¹å—å’Œçˆ½ç‰ˆä¿„ç½—æ–¯æ–¹å—ï¼Œç”µè„‘å¯ä½¿ç”¨é”®ç›˜æ“ä½œï¼</p>
                </div>
                <div class="highlight-card animate__animated animate__delay-300 animate__slideInUp">
                    <p>åŸºç¡€è®¡ç®—å™¨ï¼Œæ»¡è¶³æ—¥å¸¸è®¡ç®—éœ€æ±‚ï¼Œç”µè„‘ç«¯å¯ç›´æ¥ä½¿ç”¨é”®ç›˜</p>
                </div>
            </div>
        </section>
        <section id="bmi" class="section">
            <div class="bmi-header">
                <h2>BMIè®¡ç®—å™¨</h2>
            </div>
            <div class="bmi-container">
                <h1>æ¬¢è¿ä½¿ç”¨BMIè®¡ç®—å™¨</h1>
                <div class="input-box">
                    <label>è¯·è¾“å…¥ä½ çš„åå­—ï¼š</label><br>
                    <input type="text" id="name" placeholder="ä¾‹å¦‚ï¼šå¥ˆå¥ˆ">
                </div>
                <div class="input-box">
                    <label>è¯·è¾“å…¥ä½ çš„ä½“é‡(kg)ï¼š</label><br>
                    <input type="number" id="weight" step="0.1" placeholder="ä¾‹å¦‚ï¼š45">
                </div>
                <div class="input-box">
                    <label>è¯·è¾“å…¥ä½ çš„èº«é«˜(m)ï¼š</label><br>
                    <input type="number" id="height" step="0.01" placeholder="ä¾‹å¦‚ï¼š1.70 å•ä½æ˜¯m">
                </div>
                <button onclick="calculateBMI()">è®¡ç®—BMI</button>
                <div id="bmi-result"></div>
                <div class="bmi-history">
                    <h3>è®¡ç®—å†å²</h3>
                    <div class="history-list" id="bmi-history-list">
                        <div class="history-item">æš‚æ— å†å²è®°å½•</div>
                    </div>
                </div>
            </div>
        </section>
        <section id="tetris" class="section">
            <div class="tetris-header">
                <h2>ä¿„ç½—æ–¯æ–¹å—</h2>
            </div>
            <div class="tetris-container">
                <div class="tetris-main">
                    <canvas id="tetris-board" class="tetris-board" width="300" height="600"></canvas>
                    <div class="tetris-info-mobile">
                        <div class="tetris-info">
                            <h3>åˆ†æ•°</h3>
                            <p id="score-mobile">0</p>
                        </div>
                        <div class="tetris-info">
                            <h3>ç­‰çº§</h3>
                            <p id="level-mobile">1</p>
                        </div>
                    </div>
                </div>
                <div class="tetris-sidebar-pc">
                    <div class="tetris-info">
                        <h3>åˆ†æ•°</h3>
                        <p id="score-pc">0</p>
                    </div>
                    <div class="tetris-info">
                        <h3>ç­‰çº§</h3>
                        <p id="level-pc">1</p>
                    </div>
                    <div class="tetris-controls-pc">
                        <button class="tetris-btn-pc" onclick="tetris.moveLeft()">â† å·¦ç§»</button>
                        <button class="tetris-btn-pc" onclick="tetris.moveRight()">â†’ å³ç§»</button>
                        <button class="tetris-btn-pc" onclick="tetris.rotate()">â†‘ æ—‹è½¬</button>
                        <button class="tetris-btn-pc" onclick="tetris.moveDown()">â†“ ä¸‹ç§»</button>
                        <button class="tetris-btn-pc" onclick="tetris.dropToBottom()">â¬ ä¸€é”®ä¸‹è½</button>
                        <button class="tetris-btn-pc" onclick="tetris.startGame()">å¼€å§‹æ¸¸æˆ</button>
                        <button class="tetris-btn-pc" onclick="tetris.pauseGame()">æš‚åœ/ç»§ç»­</button>
                    </div>
                    <div class="controls-tip">
                        æ”¯æŒé”®ç›˜æ“ä½œï¼šâ†‘æ—‹è½¬ â†â†’ç§»åŠ¨ â†“ä¸‹ç§» ç©ºæ ¼å¿«é€Ÿä¸‹è½
                    </div>
                </div>
            </div>
            <div class="tetris-controls-mobile">
                <div class="control-row">
                    <button class="tetris-btn-mobile" onclick="tetris.moveLeft()">â†</button>
                    <button class="tetris-btn-mobile" onclick="tetris.rotate()">â†‘</button>
                    <button class="tetris-btn-mobile" onclick="tetris.moveRight()">â†’</button>
                </div>
                <div class="control-row">
                    <button class="tetris-btn-mobile" onclick="tetris.startGame()">å¼€å§‹</button>
                    <button class="tetris-btn-mobile" onclick="tetris.moveDown()">â†“</button>
                    <button class="tetris-btn-mobile" onclick="tetris.dropToBottom()">â¬</button>
                </div>
                <div class="control-row">
                    <button class="tetris-btn-mobile" onclick="tetris.pauseGame()">æš‚åœ</button>
                </div>
            </div>
        </section>
        <section id="tetris-fun" class="section">
            <div class="tetris-header">
                <h2>çˆ½ç‰ˆä¿„ç½—æ–¯æ–¹å—</h2>
            </div>
            <div class="tetris-container">
                <div class="tetris-main">
                    <canvas id="tetris-board-fun" class="tetris-board" width="300" height="600"></canvas>
                    <div class="tetris-info-mobile">
                        <div class="tetris-info">
                            <h3>åˆ†æ•°</h3>
                            <p id="score-mobile-fun">0</p>
                        </div>
                        <div class="tetris-info">
                            <h3>ç­‰çº§</h3>
                            <p id="level-mobile-fun">1</p>
                        </div>
                    </div>
                </div>
                <div class="tetris-sidebar-pc">
                    <div class="tetris-info">
                        <h3>åˆ†æ•°</h3>
                        <p id="score-pc-fun">0</p>
                    </div>
                    <div class="tetris-info">
                        <h3>ç­‰çº§</h3>
                        <p id="level-pc-fun">1</p>
                    </div>
                    <div class="tetris-controls-pc">
                        <button class="tetris-btn-pc" onclick="tetrisFun.moveLeft()">â† å·¦ç§»</button>
                        <button class="tetris-btn-pc" onclick="tetrisFun.moveRight()">â†’ å³ç§»</button>
                        <button class="tetris-btn-pc" onclick="tetrisFun.rotate()">â†‘ æ—‹è½¬</button>
                        <button class="tetris-btn-pc" onclick="tetrisFun.moveDown()">â†“ ä¸‹ç§»</button>
                        <button class="tetris-btn-pc special" onclick="tetrisFun.dropToBottom()">â¬ ä¸€é”®ä¸‹è½</button>
                        <button class="tetris-btn-pc special" onclick="tetrisFun.clearScreen()">ğŸ—‘ï¸ ä¸€é”®æ¸…å±</button>
                        <button class="tetris-btn-pc" onclick="tetrisFun.startGame()">å¼€å§‹æ¸¸æˆ</button>
                        <button class="tetris-btn-pc" onclick="tetrisFun.pauseGame()">æš‚åœ/ç»§ç»­</button>
                    </div>
                    <div class="controls-tip">
                        æ”¯æŒé”®ç›˜æ“ä½œï¼šâ†‘æ—‹è½¬ â†â†’ç§»åŠ¨ â†“ä¸‹ç§» ç©ºæ ¼å¿«é€Ÿä¸‹è½
                    </div>
                </div>
            </div>
            <div class="tetris-controls-mobile">
                <div class="control-row">
                    <button class="tetris-btn-mobile" onclick="tetrisFun.moveLeft()">â†</button>
                    <button class="tetris-btn-mobile" onclick="tetrisFun.rotate()">â†‘</button>
                    <button class="tetris-btn-mobile" onclick="tetrisFun.moveRight()">â†’</button>
                </div>
                <div class="control-row">
                    <button class="tetris-btn-mobile" onclick="tetrisFun.startGame()">å¼€å§‹</button>
                    <button class="tetris-btn-mobile" onclick="tetrisFun.moveDown()">â†“</button>
                    <button class="tetris-btn-mobile special" onclick="tetrisFun.dropToBottom()">â¬</button>
                </div>
                <div class="control-row">
                    <button class="tetris-btn-mobile" onclick="tetrisFun.pauseGame()">æš‚åœ</button>
                    <button class="tetris-btn-mobile special" onclick="tetrisFun.clearScreen()">ğŸ—‘ï¸</button>
                </div>
            </div>
        </section>
        <section id="calculator" class="section">
            <div class="calc-header">
                <h2>åŸºç¡€è®¡ç®—å™¨</h2>
            </div>
            <div class="calc-container">
                <input type="text" class="calc-display" id="calc-display" placeholder="0" spellcheck="false">
                <div class="calc-buttons">
                    <button class="calc-btn function" onclick="calc.append('AC')">AC</button>
                    <button class="calc-btn function" onclick="calc.backspace()">â†</button>
                    <button class="calc-btn operator" onclick="calc.append('%')">%</button>
                    <button class="calc-btn operator" onclick="calc.append('/')">Ã·</button>
                    
                    <button class="calc-btn" onclick="calc.append('7')">7</button>
                    <button class="calc-btn" onclick="calc.append('8')">8</button>
                    <button class="calc-btn" onclick="calc.append('9')">9</button>
                    <button class="calc-btn operator" onclick="calc.append('*')">Ã—</button>
                    
                    <button class="calc-btn" onclick="calc.append('4')">4</button>
                    <button class="calc-btn" onclick="calc.append('5')">5</button>
                    <button class="calc-btn" onclick="calc.append('6')">6</button>
                    <button class="calc-btn operator" onclick="calc.append('-')">-</button>
                    
                    <button class="calc-btn" onclick="calc.append('1')">1</button>
                    <button class="calc-btn" onclick="calc.append('2')">2</button>
                    <button class="calc-btn" onclick="calc.append('3')">3</button>
                    <button class="calc-btn operator" onclick="calc.append('+')">+</button>
                    
                    <button class="calc-btn" onclick="calc.append('0')">0</button>
                    <button class="calc-btn" onclick="calc.append('.')">.</button>
                    <button class="calc-btn function" onclick="calc.sqrt()">âˆš</button>
                    <button class="calc-btn function" onclick="calc.square()">xÂ²</button>
                    
                    <button class="calc-btn equal" onclick="calc.calculate()">=</button>
                </div>
                <div class="calc-tip">
                    æ”¯æŒé”®ç›˜è¾“å…¥æ•°å­—/ç¬¦å·
                </div>
            </div>
        </section>
    </div>

    <script>
        // å¯¼èˆªæ åˆ‡æ¢åŠŸèƒ½
        function toggleNavbar() {
            const body = document.body;
            if (window.innerWidth <= 768) {
                body.classList.toggle('nav-expanded');
            } else {
                body.classList.toggle('nav-collapsed');
            }
        }

        function switchSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
            document.querySelector(`.nav-link[href="#${sectionId}"]`).classList.add('active');
            
            if (window.innerWidth <= 768) {
                document.body.classList.remove('nav-expanded');
            }
        }

        // BMIè®¡ç®—å™¨
        let bmiHistory = JSON.parse(localStorage.getItem('bmiHistory')) || [];
        function renderBMIHistory() {
            const listEl = document.getElementById('bmi-history-list');
            if (bmiHistory.length === 0) {
                listEl.innerHTML = '<div class="history-item">æš‚æ— å†å²è®°å½•</div>';
                return;
            }
            listEl.innerHTML = bmiHistory.map(item => `
                <div class="history-item">
                    <span>${item.name}ï¼š${item.bmi}(${item.status})</span>
                    <span>${item.time}</span>
                </div>
            `).join('');
        }
        function calculateBMI() {
            const name = document.getElementById('name').value;
            const weight = parseFloat(document.getElementById('weight').value);
            const height = parseFloat(document.getElementById('height').value);
            const resultEl = document.getElementById('bmi-result');

            if (!name || isNaN(weight) || isNaN(height) || weight <= 0 || height <= 0) {
                resultEl.textContent = 'è¯·è¾“å…¥æœ‰æ•ˆçš„å§“åã€ä½“é‡å’Œèº«é«˜ï¼';
                resultEl.className = 'show';
                resultEl.style.backgroundColor = '#ffeeee';
                resultEl.style.color = '#ff4444';
                return;
            }

            const bmi = (weight / (height * height)).toFixed(1);
            let status = '';
            let color = '';

            if (bmi < 18.5) {
                status = 'åç˜¦';
                color = '#ff9800';
            } else if (bmi < 24) {
                status = 'æ­£å¸¸';
                color = '#4CAF50';
            } else if (bmi < 28) {
                status = 'è¶…é‡';
                color = '#ff9800';
            } else {
                status = 'è‚¥èƒ–';
                color = '#ff4444';
            }

            resultEl.innerHTML = `${name}ï¼Œä½ çš„BMIå€¼ä¸º${bmi}ï¼Œå±äº${status}èŒƒå›´`;
            resultEl.className = 'show';
            resultEl.style.backgroundColor = '#f0f9ff';
            resultEl.style.color = color;

            bmiHistory.unshift({
                name,
                bmi,
                status,
                time: new Date().toLocaleString()
            });
            if (bmiHistory.length > 10) bmiHistory.pop();
            localStorage.setItem('bmiHistory', JSON.stringify(bmiHistory));
            renderBMIHistory();
        }
        renderBMIHistory();

        // ç»å…¸ä¿„ç½—æ–¯æ–¹å—
        const tetris = {
            canvas: document.getElementById('tetris-board'),
            ctx: document.getElementById('tetris-board').getContext('2d'),
            width: 10,
            height: 20,
            cellSize: 30,
            board: [],
            currentPiece: null,
            score: 0,
            level: 1,
            lines: 0,
            gameInterval: null,
            isPlaying: false,
            isPaused: false,

            init() {
                this.canvas.width = this.width * this.cellSize;
                this.canvas.height = this.height * this.cellSize;
                this.resetBoard();
                this.generatePiece();
                this.drawBoard();
                this.bindKeyEvents();
            },

            resetBoard() {
                this.board = Array(this.height).fill().map(() => Array(this.width).fill(0));
                this.score = 0;
                this.level = 1;
                this.lines = 0;
                this.updateScore();
            },

            generatePiece() {
                const shapes = [
                    [[1, 1, 1, 1]], 
                    [[1, 1], [1, 1]], 
                    [[1, 1, 1], [0, 1, 0]], 
                    [[1, 1, 1], [1, 0, 0]], 
                    [[1, 1, 1], [0, 0, 1]], 
                    [[0, 1, 1], [1, 1, 0]], 
                    [[1, 1, 0], [0, 1, 1]]  
                ];
                const colors = ['#667eea', '#764ba2', '#ff4d6d', '#4CAF50', '#ff9800', '#2196F3', '#9C27B0'];
                const shapeIndex = Math.floor(Math.random() * shapes.length);
                
                this.currentPiece = {
                    shape: shapes[shapeIndex],
                    color: colors[shapeIndex],
                    x: Math.floor((this.width - shapes[shapeIndex][0].length) / 2),
                    y: 0
                };

                if (!this.isValidMove(0, 0)) {
                    this.gameOver();
                }
            },

            isValidMove(offsetX, offsetY) {
                return this.currentPiece.shape.every((row, y) => {
                    return row.every((cell, x) => {
                        if (!cell) return true;
                        const newX = this.currentPiece.x + x + offsetX;
                        const newY = this.currentPiece.y + y + offsetY;
                        return newX >= 0 && newX < this.width && newY < this.height && (newY < 0 || !this.board[newY][newX]);
                    });
                });
            },

            mergePiece() {
                this.currentPiece.shape.forEach((row, y) => {
                    row.forEach((cell, x) => {
                        if (cell) {
                            const newY = this.currentPiece.y + y;
                            const newX = this.currentPiece.x + x;
                            if (newY >= 0) this.board[newY][newX] = this.currentPiece.color;
                        }
                    });
                });
                this.clearLines();
                this.generatePiece();
            },

            clearLines() {
                let linesCleared = 0;
                this.board = this.board.filter(row => {
                    if (row.every(cell => cell)) {
                        linesCleared++;
                        return false;
                    }
                    return true;
                });
                while (this.board.length < this.height) {
                    this.board.unshift(Array(this.width).fill(0));
                }
                if (linesCleared > 0) {
                    this.score += linesCleared * 100 * this.level;
                    this.lines += linesCleared;
                    if (this.lines >= this.level * 10) {
                        this.level++;
                        clearInterval(this.gameInterval);
                        this.gameInterval = setInterval(() => this.moveDown(), 1000 - (this.level - 1) * 100);
                    }
                    this.updateScore();
                }
            },

            updateScore() {
                document.getElementById('score-pc').textContent = this.score;
                document.getElementById('score-mobile').textContent = this.score;
                document.getElementById('level-pc').textContent = this.level;
                document.getElementById('level-mobile').textContent = this.level;
            },

            drawBoard() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                this.board.forEach((row, y) => {
                    row.forEach((color, x) => {
                        if (color) {
                            this.ctx.fillStyle = color;
                            this.ctx.fillRect(
                                x * this.cellSize + 1,
                                y * this.cellSize + 1,
                                this.cellSize - 2,
                                this.cellSize - 2
                            );
                        }
                    });
                });

                if (this.currentPiece) {
                    this.ctx.fillStyle = this.currentPiece.color;
                    this.currentPiece.shape.forEach((row, y) => {
                        row.forEach((cell, x) => {
                            if (cell) {
                                const drawX = (this.currentPiece.x + x) * this.cellSize + 1;
                                const drawY = (this.currentPiece.y + y) * this.cellSize + 1;
                                if (drawY >= 0) {
                                    this.ctx.fillRect(
                                        drawX,
                                        drawY,
                                        this.cellSize - 2,
                                        this.cellSize - 2
                                    );
                                }
                            }
                        });
                    });
                }

                if (this.isPaused) {
                    this.ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
                    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                    this.ctx.fillStyle = 'white';
                    this.ctx.font = '24px Arial';
                    this.ctx.textAlign = 'center';
                    this.ctx.fillText('å·²æš‚åœ', this.canvas.width / 2, this.canvas.height / 2);
                }
            },

            moveLeft() {
                if (!this.isPlaying || this.isPaused) return;
                if (this.isValidMove(-1, 0)) {
                    this.currentPiece.x--;
                    this.drawBoard();
                }
            },

            moveRight() {
                if (!this.isPlaying || this.isPaused) return;
                if (this.isValidMove(1, 0)) {
                    this.currentPiece.x++;
                    this.drawBoard();
                }
            },

            rotate() {
                if (!this.isPlaying || this.isPaused) return;
                const originalShape = this.currentPiece.shape;
                const rotated = originalShape[0].map((_, index) => 
                    originalShape.map(row => row[index]).reverse()
                );
                this.currentPiece.shape = rotated;
                if (!this.isValidMove(0, 0)) {
                    if (this.isValidMove(1, 0)) {
                        this.currentPiece.x++;
                    } else if (this.isValidMove(-1, 0)) {
                        this.currentPiece.x--;
                    } else if (this.isValidMove(0, 1)) {
                        this.currentPiece.y++;
                    } else {
                        this.currentPiece.shape = originalShape;
                    }
                }
                this.drawBoard();
            },

            moveDown() {
                if (!this.isPlaying || this.isPaused) return;
                if (this.isValidMove(0, 1)) {
                    this.currentPiece.y++;
                    this.drawBoard();
                } else {
                    this.mergePiece();
                    this.drawBoard();
                }
            },

            dropToBottom() {
                if (!this.isPlaying || this.isPaused) return;
                while (this.isValidMove(0, 1)) {
                    this.currentPiece.y++;
                }
                this.mergePiece();
                this.drawBoard();
            },

            startGame() {
                if (this.isPlaying) {
                    if (this.isPaused) {
                        this.isPaused = false;
                        this.gameInterval = setInterval(() => this.moveDown(), 1000 - (this.level - 1) * 100);
                        this.drawBoard();
                    }
                    return;
                }
                
                this.resetBoard();
                this.isPlaying = true;
                this.isPaused = false;
                this.gameInterval = setInterval(() => this.moveDown(), 1000);
                this.drawBoard();
            },

            pauseGame() {
                if (!this.isPlaying) return;
                
                this.isPaused = !this.isPaused;
                if (this.isPaused) {
                    clearInterval(this.gameInterval);
                } else {
                    this.gameInterval = setInterval(() => this.moveDown(), 1000 - (this.level - 1) * 100);
                }
                this.drawBoard();
            },

            gameOver() {
                clearInterval(this.gameInterval);
                this.isPlaying = false;
                this.ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                this.ctx.fillStyle = 'white';
                this.ctx.font = '24px Arial';
                this.ctx.textAlign = 'center';
                this.ctx.fillText('æ¸¸æˆç»“æŸ', this.canvas.width / 2, this.canvas.height / 2);
                this.ctx.font = '16px Arial';
                this.ctx.fillText('ç‚¹å‡»å¼€å§‹æŒ‰é’®é‡æ–°æ¸¸æˆ', this.canvas.width / 2, this.canvas.height / 2 + 30);
            },

            bindKeyEvents() {
                document.addEventListener('keydown', (e) => {
                    if (!this.isPlaying) return;
                    
                    switch(e.key) {
                        case 'ArrowLeft':
                            this.moveLeft();
                            e.preventDefault();
                            break;
                        case 'ArrowRight':
                            this.moveRight();
                            e.preventDefault();
                            break;
                        case 'ArrowUp':
                            this.rotate();
                            e.preventDefault();
                            break;
                        case 'ArrowDown':
                            this.moveDown();
                            e.preventDefault();
                            break;
                        case ' ':
                            this.dropToBottom();
                            e.preventDefault();
                            break;
                        case 'p':
                        case 'P':
                            this.pauseGame();
                            e.preventDefault();
                            break;
                    }
                });
            }
        };

        // çˆ½ç‰ˆä¿„ç½—æ–¯æ–¹å—
        const tetrisFun = {
            canvas: document.getElementById('tetris-board-fun'),
            ctx: document.getElementById('tetris-board-fun').getContext('2d'),
            width: 10,
            height: 20,
            cellSize: 30,
            board: [],
            currentPiece: null,
            score: 0,
            level: 1,
            lines: 0,
            gameInterval: null,
            isPlaying: false,
            isPaused: false,

            init() {
                this.canvas.width = this.width * this.cellSize;
                this.canvas.height = this.height * this.cellSize;
                this.resetBoard();
                this.generatePiece();
                this.drawBoard();
                this.bindKeyEvents();
            },

            resetBoard() {
                this.board = Array(this.height).fill().map(() => Array(this.width).fill(0));
                this.score = 0;
                this.level = 1;
                this.lines = 0;
                this.updateScore();
            },

            // ä¸€é”®æ¸…å±åŠŸèƒ½ - åªæ¸…é™¤æ–¹å—ï¼Œä¿ç•™åˆ†æ•°å’Œç­‰çº§
            clearScreen() {
                if (!this.isPlaying) return;
                
                this.board = Array(this.height).fill().map(() => Array(this.width).fill(0));
                this.drawBoard();
            },

            generatePiece() {
                const shapes = [
                    [[1, 1, 1, 1]], 
                    [[1, 1], [1, 1]], 
                    [[1, 1, 1], [0, 1, 0]], 
                    [[1, 1, 1], [1, 0, 0]], 
                    [[1, 1, 1], [0, 0, 1]], 
                    [[0, 1, 1], [1, 1, 0]], 
                    [[1, 1, 0], [0, 1, 1]]  
                ];
                const colors = ['#667eea', '#764ba2', '#ff4d6d', '#4CAF50', '#ff9800', '#2196F3', '#9C27B0'];
                const shapeIndex = Math.floor(Math.random() * shapes.length);
                
                this.currentPiece = {
                    shape: shapes[shapeIndex],
                    color: colors[shapeIndex],
                    x: Math.floor((this.width - shapes[shapeIndex][0].length) / 2),
                    y: 0
                };

                if (!this.isValidMove(0, 0)) {
                    this.gameOver();
                }
            },

            isValidMove(offsetX, offsetY) {
                return this.currentPiece.shape.every((row, y) => {
                    return row.every((cell, x) => {
                        if (!cell) return true;
                        const newX = this.currentPiece.x + x + offsetX;
                        const newY = this.currentPiece.y + y + offsetY;
                        return newX >= 0 && newX < this.width && newY < this.height && (newY < 0 || !this.board[newY][newX]);
                    });
                });
            },

            mergePiece() {
                this.currentPiece.shape.forEach((row, y) => {
                    row.forEach((cell, x) => {
                        if (cell) {
                            const newY = this.currentPiece.y + y;
                            const newX = this.currentPiece.x + x;
                            if (newY >= 0) this.board[newY][newX] = this.currentPiece.color;
                        }
                    });
                });
                this.clearLines();
                this.generatePiece();
            },

            clearLines() {
                let linesCleared = 0;
                this.board = this.board.filter(row => {
                    if (row.every(cell => cell)) {
                        linesCleared++;
                        return false;
                    }
                    return true;
                });
                while (this.board.length < this.height) {
                    this.board.unshift(Array(this.width).fill(0));
                }
                if (linesCleared > 0) {
                    this.score += linesCleared * 100 * this.level;
                    this.lines += linesCleared;
                    if (this.lines >= this.level * 10) {
                        this.level++;
                        clearInterval(this.gameInterval);
                        this.gameInterval = setInterval(() => this.moveDown(), 1000 - (this.level - 1) * 100);
                    }
                    this.updateScore();
                }
            },

            updateScore() {
                document.getElementById('score-pc-fun').textContent = this.score;
                document.getElementById('score-mobile-fun').textContent = this.score;
                document.getElementById('level-pc-fun').textContent = this.level;
                document.getElementById('level-mobile-fun').textContent = this.level;
            },

            drawBoard() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                this.board.forEach((row, y) => {
                    row.forEach((color, x) => {
                        if (color) {
                            this.ctx.fillStyle = color;
                            this.ctx.fillRect(
                                x * this.cellSize + 1,
                                y * this.cellSize + 1,
                                this.cellSize - 2,
                                this.cellSize - 2
                            );
                        }
                    });
                });

                if (this.currentPiece) {
                    this.ctx.fillStyle = this.currentPiece.color;
                    this.currentPiece.shape.forEach((row, y) => {
                        row.forEach((cell, x) => {
                            if (cell) {
                                const drawX = (this.currentPiece.x + x) * this.cellSize + 1;
                                const drawY = (this.currentPiece.y + y) * this.cellSize + 1;
                                if (drawY >= 0) {
                                    this.ctx.fillRect(
                                        drawX,
                                        drawY,
                                        this.cellSize - 2,
                                        this.cellSize - 2
                                    );
                                }
                            }
                        });
                    });
                }

                if (this.isPaused) {
                    this.ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
                    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                    this.ctx.fillStyle = 'white';
                    this.ctx.font = '24px Arial';
                    this.ctx.textAlign = 'center';
                    this.ctx.fillText('å·²æš‚åœ', this.canvas.width / 2, this.canvas.height / 2);
                }
            },

            moveLeft() {
                if (!this.isPlaying || this.isPaused) return;
                if (this.isValidMove(-1, 0)) {
                    this.currentPiece.x--;
                    this.drawBoard();
                }
            },

            moveRight() {
                if (!this.isPlaying || this.isPaused) return;
                if (this.isValidMove(1, 0)) {
                    this.currentPiece.x++;
                    this.drawBoard();
                }
            },

            rotate() {
                if (!this.isPlaying || this.isPaused) return;
                const originalShape = this.currentPiece.shape;
                const rotated = originalShape[0].map((_, index) => 
                    originalShape.map(row => row[index]).reverse()
                );
                this.currentPiece.shape = rotated;
                if (!this.isValidMove(0, 0)) {
                    if (this.isValidMove(1, 0)) {
                        this.currentPiece.x++;
                    } else if (this.isValidMove(-1, 0)) {
                        this.currentPiece.x--;
                    } else if (this.isValidMove(0, 1)) {
                        this.currentPiece.y++;
                    } else {
                        this.currentPiece.shape = originalShape;
                    }
                }
                this.drawBoard();
            },

            moveDown() {
                if (!this.isPlaying || this.isPaused) return;
                if (this.isValidMove(0, 1)) {
                    this.currentPiece.y++;
                    this.drawBoard();
                } else {
                    this.mergePiece();
                    this.drawBoard();
                }
            },

            dropToBottom() {
                if (!this.isPlaying || this.isPaused) return;
                while (this.isValidMove(0, 1)) {
                    this.currentPiece.y++;
                }
                this.mergePiece();
                this.drawBoard();
            },

            startGame() {
                if (this.isPlaying) {
                    if (this.isPaused) {
                        this.isPaused = false;
                        this.gameInterval = setInterval(() => this.moveDown(), 1000 - (this.level - 1) * 100);
                        this.drawBoard();
                    }
                    return;
                }
                
                this.resetBoard();
                this.isPlaying = true;
                this.isPaused = false;
                this.gameInterval = setInterval(() => this.moveDown(), 800);
                this.drawBoard();
            },

            pauseGame() {
                if (!this.isPlaying) return;
                
                this.isPaused = !this.isPaused;
                if (this.isPaused) {
                    clearInterval(this.gameInterval);
                } else {
                    this.gameInterval = setInterval(() => this.moveDown(), 1000 - (this.level - 1) * 100);
                }
                this.drawBoard();
            },

            gameOver() {
                clearInterval(this.gameInterval);
                this.isPlaying = false;
                this.ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                this.ctx.fillStyle = 'white';
                this.ctx.font = '24px Arial';
                this.ctx.textAlign = 'center';
                this.ctx.fillText('æ¸¸æˆç»“æŸ', this.canvas.width / 2, this.canvas.height / 2);
                this.ctx.font = '16px Arial';
                this.ctx.fillText('ç‚¹å‡»å¼€å§‹æŒ‰é’®é‡æ–°æ¸¸æˆ', this.canvas.width / 2, this.canvas.height / 2 + 30);
            },

            bindKeyEvents() {
                document.addEventListener('keydown', (e) => {
                    if (!this.isPlaying) return;
                    
                    switch(e.key) {
                        case 'ArrowLeft':
                            this.moveLeft();
                            e.preventDefault();
                            break;
                        case 'ArrowRight':
                            this.moveRight();
                            e.preventDefault();
                            break;
                        case 'ArrowUp':
                            this.rotate();
                            e.preventDefault();
                            break;
                        case 'ArrowDown':
                            this.moveDown();
                            e.preventDefault();
                            break;
                        case ' ':
                            this.dropToBottom();
                            e.preventDefault();
                            break;
                        case 'p':
                        case 'P':
                            this.pauseGame();
                            e.preventDefault();
                            break;
                    }
                });
            }
        };

        // è®¡ç®—å™¨åŠŸèƒ½ - æ”¯æŒè¾“å…¥è§¦å‘è¯è§¦å‘å½©è›‹
        const calc = {
            display: document.getElementById('calc-display'),
            triggerWords: ['å¥ˆå¥ˆç†Š', 'æŠ«è¨è€å¤´'], // è§¦å‘å½©è›‹çš„å…³é”®è¯
            heartSymbols: ['â¤ï¸', 'ğŸ§¡', 'ğŸ’›', 'ğŸ’š', 'ğŸ’™', 'ğŸ’œ', 'ğŸ–¤', 'ğŸ’•', 'ğŸ’', 'ğŸ’“', 'ğŸ’–', 'ğŸ’˜', 'ğŸ’', 'ğŸ¤', 'ğŸ¤'],
            easterEggTriggered: false, // æ ‡è®°å½©è›‹æ˜¯å¦å·²è§¦å‘
            
            append(value) {
                // é‡ç½®å½©è›‹è§¦å‘çŠ¶æ€
                if (value === 'AC') {
                    this.easterEggTriggered = false;
                }
                
                // å¤„ç†æ¸…é™¤æŒ‰é’®
                if (value === 'AC') {
                    this.clear();
                    return;
                }
                
                // å¦‚æœå½“å‰æ˜¾ç¤ºä¸º0ä¸”è¾“å…¥çš„æ˜¯æ•°å­—ï¼Œåˆ™æ›¿æ¢
                if (this.display.value === '0' && !isNaN(value) && value !== '.') {
                    this.display.value = value;
                } else {
                    this.display.value += value;
                }
                this.display.focus();
                this.scrollDisplay();
                this.checkEasterEgg(); // æ£€æŸ¥æ˜¯å¦è§¦å‘å½©è›‹
            },
            
            clear() {
                this.display.value = '0';
                this.display.focus();
                this.easterEggTriggered = false; // æ¸…é™¤æ—¶é‡ç½®å½©è›‹çŠ¶æ€
            },
            
            backspace() {
                if (this.display.value.length > 1) {
                    this.display.value = this.display.value.slice(0, -1);
                } else {
                    this.display.value = '0';
                }
                this.display.focus();
                this.checkEasterEgg(); // æ£€æŸ¥æ˜¯å¦è§¦å‘å½©è›‹
            },
            
            calculate() {
                try {
                    // æ£€æŸ¥æ˜¯å¦è§¦å‘äº†å½©è›‹ï¼Œå¦‚æœæ˜¯åˆ™ç›´æ¥è¿”å›520
                    if (this.easterEggTriggered) {
                        this.display.value = '520';
                        return;
                    }
                    
                    let expression = this.display.value.replace('Ã—', '*').replace('Ã·', '/');
                    expression = expression.replace(/(\d+)%/g, '(($1)/100)');
                    
                    // å…ˆæ£€æŸ¥æ˜¯å¦æœ‰è§¦å‘è¯ï¼Œå¦‚æœæœ‰åˆ™å…ˆè§¦å‘å½©è›‹
                    this.checkEasterEgg();
                    
                    let result = eval(expression);
                    
                    if (result.toString().includes('.') && result.toString().split('.')[1].length > 10) {
                        result = result.toFixed(10);
                    }
                    
                    this.display.value = result;
                } catch (error) {
                    this.display.value = 'é”™è¯¯';
                }
                this.display.focus();
                this.scrollDisplay();
            },
            
            sqrt() {
                // å½©è›‹è§¦å‘çŠ¶æ€ä¸‹ï¼Œå¼€æ ¹å·ä¹Ÿè¿”å›520
                if (this.easterEggTriggered) {
                    this.display.value = '520';
                    return;
                }
                
                try {
                    const value = parseFloat(this.display.value);
                    if (value >= 0) {
                        this.display.value = Math.sqrt(value);
                    } else {
                        this.display.value = 'é”™è¯¯';
                    }
                } catch (error) {
                    this.display.value = 'é”™è¯¯';
                }
                this.display.focus();
                this.scrollDisplay();
            },
            
            square() {
                // å½©è›‹è§¦å‘çŠ¶æ€ä¸‹ï¼Œå¹³æ–¹ä¹Ÿè¿”å›520
                if (this.easterEggTriggered) {
                    this.display.value = '520';
                    return;
                }
                
                try {
                    const value = parseFloat(this.display.value);
                    this.display.value = value * value;
                } catch (error) {
                    this.display.value = 'é”™è¯¯';
                }
                this.display.focus();
                this.scrollDisplay();
            },
            
            scrollDisplay() {
                this.display.scrollLeft = this.display.scrollWidth;
            },
            
            // æ£€æŸ¥æ˜¯å¦è§¦å‘å½©è›‹
            checkEasterEgg() {
                const inputValue = this.display.value.trim();
                if (!this.easterEggTriggered && this.triggerWords.some(word => inputValue.includes(word))) {
                    this.easterEggTriggered = true;
                    this.startHeartEasterEgg();
                    // ç›´æ¥å°†ç»“æœè®¾ç½®ä¸º520
                    setTimeout(() => {
                        this.display.value = '520';
                    }, 100);
                }
            },
            
            // çˆ±å¿ƒå½©è›‹æ•ˆæœ - æ»¡å±ã€å¯†é›†ã€5ç§’å¾ªç¯
            startHeartEasterEgg() {
                const duration = 5000; // æŒç»­5ç§’
                const startTime = Date.now();
                const maxHearts = 200; // æœ€å¤§åŒæ—¶å­˜åœ¨çš„çˆ±å¿ƒæ•°é‡
                
                // æ¸…é™¤å¯èƒ½å­˜åœ¨çš„æ—§çˆ±å¿ƒ
                document.querySelectorAll('.heart').forEach(heart => heart.remove());
                
                // æŒç»­ç”Ÿæˆçˆ±å¿ƒ
                function createHeart() {
                    // æ£€æŸ¥æ˜¯å¦è¶…è¿‡æŒç»­æ—¶é—´
                    if (Date.now() - startTime > duration) return;
                    
                    // æ§åˆ¶åŒæ—¶å­˜åœ¨çš„çˆ±å¿ƒæ•°é‡
                    const currentHearts = document.querySelectorAll('.heart').length;
                    if (currentHearts < maxHearts) {
                        const heart = document.createElement('div');
                        heart.classList.add('heart');
                        
                        // éšæœºé€‰æ‹©çˆ±å¿ƒæ ·å¼
                        heart.textContent = calc.heartSymbols[Math.floor(Math.random() * calc.heartSymbols.length)];
                        
                        // éšæœºå¤§å° (0.5-2å€)
                        const size = Math.random() * 1.5 + 0.5;
                        heart.style.fontSize = `${size}em`;
                        
                        // éšæœºä½ç½®ï¼ˆå±å¹•å†…ï¼‰
                        heart.style.left = `${Math.random() * 100}vw`;
                        heart.style.top = `${Math.random() * 100}vh`;
                        
                        // éšæœºæ°´å¹³åç§»å’Œç¼©æ”¾å‚æ•°
                        const xOffset = (Math.random() - 0.5) * 600; // å·¦å³åç§»èŒƒå›´
                        const scale = Math.random() * 1.5 + 0.5; // ç¼©æ”¾èŒƒå›´
                        heart.style.setProperty('--x', xOffset);
                        heart.style.setProperty('--scale', scale);
                        
                        document.body.appendChild(heart);
                        
                        // åŠ¨ç”»ç»“æŸåç§»é™¤
                        setTimeout(() => {
                            if (heart.parentNode) {
                                heart.remove();
                            }
                        }, 1500);
                    }
                    
                    // ç»§ç»­ç”Ÿæˆï¼Œä¿æŒå¯†é›†æ•ˆæœ
                    requestAnimationFrame(() => {
                        setTimeout(createHeart, 30); // æ¯30msç”Ÿæˆä¸€ä¸ª
                    });
                }
                
                createHeart();
            }
        };

        // è®¡ç®—å™¨é”®ç›˜æ”¯æŒ
        document.addEventListener('keydown', (e) => {
            if (document.activeElement === calc.display) {
                // æ•°å­—é”®
                if (/[0-9]/.test(e.key)) {
                    e.preventDefault();
                    calc.append(e.key);
                }
                // è¿ç®—ç¬¦
                switch(e.key) {
                    case '+':
                    case '-':
                    case '*':
                    case '/':
                        e.preventDefault();
                        calc.append(e.key.replace('*', 'Ã—').replace('/', 'Ã·'));
                        break;
                    case '.':
                        e.preventDefault();
                        calc.append('.');
                        break;
                    case 'Enter':
                        e.preventDefault();
                        calc.calculate();
                        break;
                    case 'Escape':
                        e.preventDefault();
                        calc.clear();
                        break;
                    case 'Backspace':
                        e.preventDefault();
                        calc.backspace();
                        break;
                }
            }
        });

        // åˆå§‹åŒ–æ¸¸æˆ
        window.onload = () => {
            tetris.init();
            tetrisFun.init();
            calc.display.focus();
        };
    </script>
</body>
</html>